{
    "componentChunkName": "component---src-pages-markdown-remark-frontmatter-slug-js",
    "path": "/blog/going-beyond-imgbb-api/",
    "result": {"data":{"markdownRemark":{"html":"<p>Uploading and sharing images temporarily is a big part of my workflow, and I make sure to make it as efficient as possible. I've previously made scripts, Raycast shortcuts and Shortcuts (Apple) to make sharing as fast as possible. I've been using ImgBB as an alternative to Imgur for some time because Imgur is focusing too much on <em>their</em> own platform more rather than letting users share images directly without going through their web interface <em>(read: they need profit)</em>. Specially on mobile, the direct link redirects to their annoying site with pop-ups to install their app.</p>\n<p>As for Imgbb, they have a simple api that lets users upload images, but only caveat is that their api only supports uploading images to your public profile. It unfortunately does not support uploading images to public/private album which is my preferred option. You still get to share the individual image to certain people, but <em>not</em> share all your uploaded images. So I thought I would dig more into their web interface and see if I can find a way to upload images to a specific album.</p>\n<p class=\"blog-notice-yellow\">TLDR: I did find a way. scroll <a href=#request>here</a> to skip the process of figuring it out and see how to do it yourself.</p>\n<p>First of all, I opened up their website to upload an image to a private album, and fired up Postman's Interceptor. Then I uploaded an image to the album normally. Let's open up Postman and see what's going to under the bonnet.</p>\n<img src=\"../../blogassets/post-3_1.png\" alt=\"Postman Screenshot of POST Request\" class=\"container\" style=\"zoom:100%;margin-top:10px;margin-bottom:10px;\" />\n<p>Oh hello! What do we have here? Lets see. They are sending a <code>POST</code> request to <code>https://ibb.com/json</code> with a <code>form-data</code> with the images. The <code>auth_token</code>is internal, not from the ones I created for my app. Now let's try to strip the request and try to make our own, without using the website.</p>\n<img src=\"../../blogassets/post-3_2.png\" alt=\"Postman Screenshot of POST Response\" class=\"container\" style=\"zoom:100%;margin-top:10px;margin-bottom:10px;\" />\n<p>Is that <code>status_code: 200</code> I see? Success! I stripped out most of the Headers, only keeping <code>Accept: application/json</code> and <code>Content-Type: multipart/form-data;</code>. I also went ahead and stripped the form-data as well. For the image, had to use the <code>File</code> type value for <code>source</code> and surprisingly, using tokens from the API key they gave me in<code>auth_token</code> worked, such a relief to avoid using their internal userapi, making it a cleaner solution.</p>\n<p>After the success, I went ahead did a couple more tests, with varying album visibility, multiple file uploads etc. Well, multiple uploads with one request can not be done, even they themselves use separate <code>POST</code> requests when uploading multiple images, so all good in this case.</p>\n<h2 id=\"request\" style=\"position:relative;\"><a href=\"#request\" aria-label=\"request permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Request</h2>\n<p>Here it is, the actual <code>POST</code> request that you will need for uploading image. Get the album ID from the website link itself, <code>https://ibb.co/album/&#x3C;ALBUM_ID></code> and the api key from <a href=\"https://api.imgbb.com/\">here</a>.</p>\n<deckgo-highlight-code language=\"bash\" terminal=\"carbon\" theme=\"dracula\"  >\n          <code slot=\"code\">curl --location --request POST &#39;https://ibb.co/json&#39; \\\n--header &#39;Accept: application/json&#39; \\\n--header &#39;Content-Type: multipart/form-data&#39; \\\n--form &#39;action=&quot;upload&quot;&#39; \\\n--form &#39;album_id=&quot;&lt;ALBUM_ID&gt;&quot;&#39; \\\n--form &#39;auth_token=&quot;&lt;YOUR_API_KEY&gt;&quot;&#39; \\\n--form &#39;source=@&quot;/path/to/image.ext&quot;&#39; \\\n--form &#39;type=&quot;file&quot;&#39;</code>\n        </deckgo-highlight-code>\n<p>If everything goes right, you will get a json response with <code>200</code> status code, and in the response, you can filter out direct link to the image via <code>image.url</code> key, which then you can share with others without revealing other images on the album.</p>\n<h2 id=\"implementation\" style=\"position:relative;\"><a href=\"#implementation\" aria-label=\"implementation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Implementation</h2>\n<p>For Imgbb uploads, I currently have <a href=\"https://github.com/i3p9/Imgbb.sh\">Imgbb.sh</a> on github which works as a command-line tool to upload images, will eventually implement uploading to album support.</p>\n<p>I also have a Shortcuts on iOS (And now on macOS too, Monterey) to deal with uploading them. I have implemented my new method on the Shortcut already, which you can grab from <a href=\"https://www.icloud.com/shortcuts/0d75372f52ab4fd198025ff4361b42dd\">here</a>, supports iOS/iPadOS 14 or above, and macOS Monetery 12 or above. On first run, it has a easy setup to input API key and Album ID.</p>","frontmatter":{"date":"October 29, 2021","slug":"/blog/going-beyond-imgbb-api","title":"Going beyond the ImgBB API offerings","summary":"Imgbb has a simple but restricted API, can we make it better?"},"fields":{"readingTime":{"text":"4 min read"}}}},"pageContext":{"id":"52cf9abb-f1af-5fdd-80ff-b9b7d107c0c3","frontmatter__slug":"/blog/going-beyond-imgbb-api","__params":{"frontmatter__slug":"blog"}}},
    "staticQueryHashes": []}