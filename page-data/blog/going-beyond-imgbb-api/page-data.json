{
    "componentChunkName": "component---src-pages-markdown-remark-frontmatter-slug-js",
    "path": "/blog/going-beyond-imgbb-api/",
    "result": {"data":{"markdownRemark":{"html":"<p>Uploading and sharing images temporarily is a big part of my workflow, and I make sure to make it as efficient as possible. I've previously made scripts, Raycast shortcuts and Shortcuts (Apple) to make sharing as fast as possible. I've been using ImgBB as an alternative to Imgur for some time because Imgur is focusing too much on <em>their</em> own platform more rather than letting users share images directly without going through their web interface.</p>\n<p>I get it. As popular as Imgur become, it costs them a lot without almost no return if they let people use direct link to the images. Thankfully desktop browsers shows them correctly, but on Mobile, Imgur hijacks the direct link and shows the image with their on web interface which is slow, clunky and gets way in your face to install their Mobile app. Imgbb sweeps along and solves this issue.</p>\n<p>As for Imgbb, they have a simple api that lets users upload images, but the caveat is that their api only supports uploading images to your public profile. It unfortunately does not support uploading images to public/private album which is my preferred option. You still get to share the individual image to certain people, but <em>not</em> share all your uploaded images, it isn't simply very comfortable to me. So I thought I would dig more into their web interface and see if I can find a way to upload images to a specific album.</p>\n<p>TLDR: I did find a way. scroll <a href=\"#how\">here</a> to skip the process of finding it out and see how.</p>\n<p>First of all, I opened up their website to upload an image to a private album, and fired up Postman's Interceptor. Then I uploaded an image to the album normally. Let's open up Postman and see what's going to under the bonnet.</p>\n<img src=\"https://i.ibb.co/PrCLJm8/Postman-7-Fqgf-HWNo-W.png\" alt=\"Postman Screenshot 2\" style=\"zoom:50%;\" />\n<p>Oh hello! What do we have here? Lets see. They are sending a <code>POST</code> request to <code>https://ibb.com/json</code> with a <code>form-data</code> with the images. The <code>auth_token</code>is internal, not from the ones I created for my app. Now let's try to strip the request and try to make our own, without using the website.</p>\n<img src=\"https://i.ibb.co/QD7vH04/Postman-IQTbmeg-Ho-N.png\" alt=\"Postman Screenshot 2\" style=\"zoom:50%;\" />\n<p>Is that <code>status_code: 200</code> I see? Success! I stripped out most of the Headers, only keeping <code>Accept: application/json</code> and <code>Content-Type: multipart/form-data;</code>. I also went ahead and stripped the form-data as well. For the image, had to use the <code>File</code> type value for <code>source</code> and surprisingly, using tokens from the API key they gave me in<code>auth_token</code> worked, such a relief to avoid using their internal userapi, making it a cleaner solution.</p>\n<p>After the success, I went ahead did a couple more tests, with varying album visibility, multiple file uploads etc. Well, multiple uploads with one request can not be done, even they themselves use separate <code>POST</code> requests when uploading multiple images, so all good in this case.</p>\n<p>Now it's what you've been waiting for. The actual <code>POST</code> request that you will need for uploading image. Get the album ID from the website link itself, <code>https://ibb.co/album/&#x3C;ALBUM_ID></code> and the api key from <a href=\"https://api.imgbb.com/\">here</a></p>\n<ul>\n<li>Request Type:<code>POST</code>-> <code>https://ibb.co/json</code></li>\n<li>Headers:\n<ul>\n<li><code>Accept</code>: <code>application/json</code></li>\n<li><code>Content-Type</code>: <code>multipart/form-data;</code></li>\n</ul>\n</li>\n<li>Body:\n<ul>\n<li><code>action</code>: <code>upload</code></li>\n<li><code>album_id</code>: <code>YOUR_ALBUM_ID</code></li>\n<li><code>auth_token</code>: <code>YOUR_API_KEY</code></li>\n<li><code>source</code>: <code>IMAGE_FILE</code> (type: <code>file</code>)</li>\n<li><code>type</code>: <code>file</code></li>\n</ul>\n</li>\n</ul>\n<p>If everything goes right, you will get a <code>200</code> status code, and in the response, you can filter out direct link to the image via <code>image.url</code> key, which then you can share with others without revealing other images on the album.</p>\n<h5>Implementation</h5>\n<p>For Imgbb uploads, I currently have <a href=\"https://github.com/i3p9/Imgbb.sh\">Imgbb.sh</a> on github which works as a command-line tool to upload images,</p>\n<p>I also have a Shortcuts on iOS (And now on macOS too, Monterey) to deal with uploading them. I have implemented my new method on the Shortcut already, which you can grab from <a href=\"https://www.icloud.com/shortcuts/0d75372f52ab4fd198025ff4361b42dd\">here</a>, supports iOS/iPadOS 14 or above, and macOS Monetery 12 or above. On first run, it has a easy setup to input API key and Album ID.</p>","frontmatter":{"date":"October 29, 2021","slug":"/blog/going-beyond-imgbb-api","title":"Going beyond the ImgBB API offerings","summary":"Imgbb has a simple but restricted API, can we make it better?"}}},"pageContext":{"id":"c03e4ac0-9f95-5bd8-946b-57d107ee00f7","frontmatter__slug":"/blog/going-beyond-imgbb-api","__params":{"frontmatter__slug":"blog"}}},
    "staticQueryHashes": []}